CREATE DATABASE IF NOT EXISTS securedevops;
CREATE USER IF NOT EXISTS 'secuser'@'%' IDENTIFIED BY '12345678';
GRANT ALL PRIVILEGES ON securedevops.* TO 'secuser'@'%';
FLUSH PRIVILEGES;

USE securedevops;

CREATE TABLE IF NOT EXISTS users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,
  role VARCHAR(20) NOT NULL DEFAULT 'user'
);

INSERT IGNORE INTO users (username, password, role)
VALUES ('admin', 'scrypt:32768:8:1$Ldm0fE4zdiMkC9rP$52136ea9da357d3902f3f409c98ee5310853dd63d68a0d7a541c9ddf28897491c71e491d08a830619e11a410ff42b9431a189a836f99e1c29fa4c7cf0ba9467e', 'admin');
