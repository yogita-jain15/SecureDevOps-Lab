sudo apt update
sudo apt install mysql-server -y

sudo systemctl start mysql
sudo systemctl enable mysql

sudo mysql_secure_installation

sudo mysql

CREATE DATABASE securedevops;
CREATE USER 'secuser'@'localhost' IDENTIFIED BY 'StrongPass123';
GRANT ALL PRIVILEGES ON securedevops.* TO 'secuser'@'localhost';
FLUSH PRIVILEGES;

EXIT;

mysql -u secuser -p


USE securedevops;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role ENUM('user','admin') DEFAULT 'user'
);

EXIT;

source ~/.venvs/sdops/bin/activate

pip install mysql-connector-python werkzeug


ALTER TABLE users 
    MODIFY role VARCHAR(20) NOT NULL DEFAULT 'user';



//RBAC

mysql -u secuser -p
USE securedevops;
DESC users;
-- should show: id, username, password, role
EXIT;


USE securedevops;
SELECT id, username, role FROM users;

UPDATE users SET role='admin' WHERE username='Yogita';

SELECT id, username, role FROM users WHERE username='Yogita';







